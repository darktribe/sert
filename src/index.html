<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinsert - Simple Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- =====================================================
             メニューバー
             ファイル操作、編集操作のメニューを提供
             ===================================================== -->
        <div class="menu-bar">
            <!-- ファイルメニュー -->
            <div class="menu-item" onclick="toggleMenu('file-menu')">
                <span data-i18n="menu.file">File</span>
                <div id="file-menu" class="dropdown-menu">
                    <div class="menu-option" onclick="newFile()" data-i18n="fileMenu.new">New</div>
                    <div class="menu-option" onclick="openFile()" data-i18n="fileMenu.open">Open</div>
                    <div class="menu-option" onclick="saveFile()" data-i18n="fileMenu.save">Save</div>
                    <div class="menu-option" onclick="saveAsFile()" data-i18n="fileMenu.saveAs">Save As</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="exitApp()" data-i18n="fileMenu.exit">Exit</div>
                </div>
            </div>
            
            <!-- 編集メニュー -->
            <div class="menu-item" onclick="toggleMenu('edit-menu')">
                <span data-i18n="menu.edit">Edit</span>
                <div class="dropdown-menu" id="edit-menu">
                    <div class="menu-option" onclick="undo()" data-i18n="editMenu.undo">Undo</div>
                    <div class="menu-option" onclick="redo()" data-i18n="editMenu.redo">Redo</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="cut()" data-i18n="editMenu.cut">Cut</div>
                    <div class="menu-option" onclick="copy()" data-i18n="editMenu.copy">Copy</div>
                    <div class="menu-option" onclick="paste()" data-i18n="editMenu.paste">Paste</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="selectAll()" data-i18n="editMenu.selectAll">Select All</div>
                </div>
            </div>

            <!-- 表示メニュー（行ハイライト機能を追加） -->
            <div class="menu-item" onclick="toggleMenu('view-menu')">
                <span data-i18n="menu.view">View</span>
                <div class="dropdown-menu" id="view-menu">
                    <div class="menu-option" onclick="showFontSettingsDialog()" data-i18n="viewMenu.fontSettings">Font Settings</div>
                    <div class="menu-option" onclick="showFontSizeInputDialog()" data-i18n="viewMenu.fontSizeInput">Font Size Input</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="increaseFontSize()" data-i18n="viewMenu.increaseFontSize">Increase Font Size</div>
                    <div class="menu-option" onclick="decreaseFontSize()" data-i18n="viewMenu.decreaseFontSize">Decrease Font Size</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option menu-option-checkbox" id="line-highlight-menu-option" onclick="toggleLineHighlight()">
                        <span class="menu-checkmark">✓</span>
                        <span data-i18n="viewMenu.lineHighlight">Line Highlight</span>
                    </div>
                    <div class="menu-option menu-option-checkbox" id="typewriter-mode-menu-option" onclick="toggleTypewriterMode()">
                        <span class="menu-checkmark">✓</span>
                        <span data-i18n="viewMenu.typewriterMode">Typewriter Mode</span>
                    </div>
                </div>
            </div>

            <!-- 検索メニュー -->
            <div class="menu-item" onclick="toggleMenu('search-menu')">
                <span data-i18n="menu.search">Search</span>
                <div class="dropdown-menu" id="search-menu">
                    <div class="menu-option" onclick="showSearchDialog()" data-i18n="searchMenu.find">Find</div>
                    <div class="menu-option" onclick="showReplaceDialog()" data-i18n="searchMenu.replace">Replace</div>
                </div>
            </div>

            <!-- 機能拡張メニュー -->
            <div class="menu-item" onclick="toggleMenu('extensions-menu')">
                <span data-i18n="menu.extensions">Extensions</span>
                <div id="extensions-menu" class="dropdown-menu">
                    <div class="menu-option" onclick="showExtensionSettingsDialog()" data-i18n="extensionsMenu.extensionSettings">Extension Settings</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="showLanguageSettingsDialog()" data-i18n="extensionsMenu.languageSettings">Language Settings</div>
                    <div class="menu-option" onclick="showThemeDialog()" data-i18n="extensionsMenu.theme">Theme</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="openAppFolder()" data-i18n="extensionsMenu.openAppFolder">Open App Folder</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="openAppFolder()" data-i18n="extensionsMenu.openAppFolder">Open App Folder</div>
                </div>
            </div>
        </div>

        <!-- =====================================================
             エディタエリア
             行番号とテキスト編集領域を含む
             ===================================================== -->
        <div class="editor-container">
            <!-- 行番号表示 -->
            <div class="line-numbers" id="line-numbers">1</div>
            
            <!-- メインテキストエディタ -->
            <textarea 
                class="editor-textarea" 
                id="editor" 
                data-i18n-placeholder="editor.placeholder"
                placeholder="Please enter text here..."
                spellcheck="false"
            ></textarea>
        </div>

        <!-- =====================================================
             ステータスバー（フォントサイズ表示を追加）
             カーソル位置、フォントサイズ、文字数を表示
             ===================================================== -->
        <div class="status-bar">
            <span id="cursor-position">Line: 1, Column: 1</span>
            <span id="file-encoding" data-i18n="statusBar.encoding">UTF-8</span>
            <span id="font-size-display">フォント: 14px</span>
            <span id="char-count">Character count: 0</span>
            <span id="selection-count" style="display: none;">Selection: 0</span>
        </div>
    </div>

    <!-- =====================================================
         JavaScript初期化
         メインスクリプトを直接読み込み、グローバル関数を確実に登録
         ===================================================== -->
    <script type="module" src="main.js"></script>
</body>
</html>