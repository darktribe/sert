<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sert - Simple Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- =====================================================
             „É°„Éã„É•„Éº„Éê„Éº
             „Éï„Ç°„Ç§„É´Êìç‰Ωú„ÄÅÁ∑®ÈõÜÊìç‰Ωú„ÅÆ„É°„Éã„É•„Éº„ÇíÊèê‰æõ
             ===================================================== -->
        <div class="menu-bar">
            <!-- „Éï„Ç°„Ç§„É´„É°„Éã„É•„Éº -->
            <div class="menu-item" onclick="toggleMenu('file-menu')">
                <span data-i18n="menu.file">„Éï„Ç°„Ç§„É´</span>
                <div class="dropdown-menu" id="file-menu">
                    <div class="menu-option" onclick="newFile()" data-i18n="fileMenu.new">Êñ∞Ë¶è‰ΩúÊàê</div>
                    <div class="menu-option" onclick="openFile()" data-i18n="fileMenu.open">Èñã„Åè</div>
                    <div class="menu-option" onclick="console.log('üíæ Save menu clicked'); if(typeof saveFile === 'function') { saveFile(); } else { console.error('‚ùå saveFile not found!', typeof saveFile); }" data-i18n="fileMenu.save">‰∏äÊõ∏„Åç‰øùÂ≠ò</div>
                    <div class="menu-option" onclick="saveAsFile()" data-i18n="fileMenu.saveAs">ÂêçÂâç„Çí‰ªò„Åë„Å¶‰øùÂ≠ò</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="exitApp()" data-i18n="fileMenu.exit">ÁµÇ‰∫Ü</div>
                </div>
            </div>
            
            <!-- Á∑®ÈõÜ„É°„Éã„É•„Éº -->
            <div class="menu-item" onclick="toggleMenu('edit-menu')">
                <span data-i18n="menu.edit">Á∑®ÈõÜ</span>
                <div class="dropdown-menu" id="edit-menu">
                    <div class="menu-option" onclick="undo()" data-i18n="editMenu.undo">ÂÖÉ„Å´Êàª„Åô</div>
                    <div class="menu-option" onclick="redo()" data-i18n="editMenu.redo">„ÇÑ„ÇäÁõ¥„Åó</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="cut()" data-i18n="editMenu.cut">Âàá„ÇäÂèñ„Çä</div>
                    <div class="menu-option" onclick="copy()" data-i18n="editMenu.copy">„Ç≥„Éî„Éº</div>
                    <div class="menu-option" onclick="paste()" data-i18n="editMenu.paste">Ë≤º„Çä‰ªò„Åë</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="selectAll()" data-i18n="editMenu.selectAll">„Åô„Åπ„Å¶ÈÅ∏Êäû</div>
                </div>
            </div>

            <!-- Ê§úÁ¥¢„É°„Éã„É•„Éº -->
            <div class="menu-item" onclick="toggleMenu('search-menu')">
                <span data-i18n="menu.search">Ê§úÁ¥¢</span>
                <div class="dropdown-menu" id="search-menu">
                    <div class="menu-option" onclick="showSearchDialog()" data-i18n="searchMenu.find">Ê§úÁ¥¢</div>
                    <div class="menu-option" onclick="showReplaceDialog()" data-i18n="searchMenu.replace">ÁΩÆÊèõ</div>
                </div>
            </div>
        </div>

        <!-- =====================================================
             „Ç®„Éá„Ç£„Çø„Ç®„É™„Ç¢
             Ë°åÁï™Âè∑„Å®„ÉÜ„Ç≠„Çπ„ÉàÁ∑®ÈõÜÈ†òÂüü„ÇíÂê´„ÇÄ
             ===================================================== -->
        <div class="editor-container">
            <!-- Ë°åÁï™Âè∑Ë°®Á§∫ -->
            <div class="line-numbers" id="line-numbers">1</div>
            
            <!-- „É°„Ç§„É≥„ÉÜ„Ç≠„Çπ„Éà„Ç®„Éá„Ç£„Çø -->
            <textarea 
                class="editor-textarea" 
                id="editor" 
                data-i18n-placeholder="editor.placeholder"
                placeholder="„Åì„Åì„Å´„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."
                spellcheck="false"
            ></textarea>
        </div>

        <!-- =====================================================
             „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„Éº
             „Ç´„Éº„ÇΩ„É´‰ΩçÁΩÆ„Å®ÊñáÂ≠óÊï∞„ÇíË°®Á§∫
             ===================================================== -->
             <div class="status-bar">
                <span id="cursor-position">Ë°å: 1, Âàó: 1</span>
                <span id="file-encoding" data-i18n="statusBar.encoding">UTF-8</span>
                <span id="char-count">Á∑èÊñáÂ≠óÊï∞: 0</span>
            </div>
    </div>

    <!-- =====================================================
         JavaScriptÂàùÊúüÂåñ
         „É°„Ç§„É≥„Çπ„ÇØ„É™„Éó„Éà„ÇíÁõ¥Êé•Ë™≠„ÅøËæº„Åø„ÄÅ„Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„ÇíÁ¢∫ÂÆü„Å´ÁôªÈå≤
         ===================================================== -->
    <script type="module" src="main.js"></script>
    
    <!-- „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÁî®„ÅÆ„Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„ÉÅ„Çß„ÉÉ„ÇØ -->
    <script>
        // „É°„Éã„É•„Éº„Åå„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„ÅüÊôÇ„ÅÆ„Éá„Éê„ÉÉ„Ç∞Èñ¢Êï∞
        window.debugSave = function() {
            console.log('üîç Debug: saveFile function check');
            console.log('typeof window.saveFile:', typeof window.saveFile);
            if (typeof window.saveFile === 'function') {
                console.log('‚úÖ saveFile function found, calling it...');
                window.saveFile();
            } else {
                console.error('‚ùå saveFile function not found!');
                console.log('Available window functions:', Object.keys(window).filter(key => key.includes('File')));
            }
        };
        
        // DOMContentLoadedÂæå„Å´„Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„ÅÆÂ≠òÂú®Á¢∫Ë™ç
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                console.log('üîç Final global function check:');
                console.log('window.saveFile:', typeof window.saveFile);
                console.log('window.newFile:', typeof window.newFile);
                console.log('window.openFile:', typeof window.openFile);
                console.log('window.showSearchDialog:', typeof window.showSearchDialog);
                console.log('window.showReplaceDialog:', typeof window.showReplaceDialog);
                
                if (typeof window.saveFile !== 'function') {
                    console.error('‚ùå Critical: saveFile not registered as global function!');
                }
            }, 2000);
        });
    </script>
</body>
</html>