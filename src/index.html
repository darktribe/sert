.hml<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sert Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- =====================================================
             メニューバー
             ファイル操作、編集操作のメニューを提供
             ===================================================== -->
        <div class="menu-bar">
            <!-- ファイルメニュー -->
            <div class="menu-item" onclick="toggleMenu('file-menu')">
                ファイル
                <div class="dropdown-menu" id="file-menu">
                    <div class="menu-option" onclick="event.stopPropagation(); newFile()">新規作成</div>
                    <div class="menu-option" onclick="event.stopPropagation(); openFile()">開く</div>
                    <div class="menu-option" onclick="event.stopPropagation(); saveFile()">保存</div>
                    <div class="menu-option" onclick="event.stopPropagation(); saveAsFile()">名前を付けて保存</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="event.stopPropagation(); exitApp()">終了</div>
                </div>
            </div>
            
            <!-- 編集メニュー -->
            <div class="menu-item" onclick="toggleMenu('edit-menu')">
                編集
                <div class="dropdown-menu" id="edit-menu">
                    <div class="menu-option" onclick="event.stopPropagation(); undo()">元に戻す</div>
                    <div class="menu-option" onclick="event.stopPropagation(); redo()">やり直し</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="event.stopPropagation(); cut()">切り取り</div>
                    <div class="menu-option" onclick="event.stopPropagation(); copy()">コピー</div>
                    <div class="menu-option" onclick="event.stopPropagation(); paste()">貼り付け</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" onclick="event.stopPropagation(); selectAll()">すべて選択</div>
                </div>
            </div>
        </div>

        <!-- =====================================================
             エディタエリア
             行番号とテキスト編集領域を含む
             ===================================================== -->
        <div class="editor-container">
            <!-- 行番号表示 -->
            <div class="line-numbers" id="line-numbers">1</div>
            
            <!-- メインテキストエディタ -->
            <textarea 
                class="editor-textarea" 
                id="editor" 
                placeholder="ここにテキストを入力してください..."
                spellcheck="false"
            ></textarea>
        </div>

        <!-- =====================================================
             ステータスバー
             カーソル位置と文字数を表示
             ===================================================== -->
        <div class="status-bar">
            <span id="cursor-position">行: 1, 列: 1</span>
            <span id="char-count">総文字数: 0</span>
        </div>
    </div>

    <!-- =====================================================
         JavaScript初期化（ES6モジュール対応）
         ===================================================== -->
    <script>
        console.log('HTML loaded, checking for Tauri...');
        console.log('window.__TAURI__ at load time:', typeof window.__TAURI__);
        
        // Tauriが読み込まれるまで少し待つ
        let checkCount = 0;
        const checkTauri = () => {
            checkCount++;
            console.log(`Tauri check ${checkCount}: ${typeof window.__TAURI__}`);
            if (window.__TAURI__ || checkCount >= 10) {
                console.log('Loading main script...');
                const script = document.createElement('script');
                script.type = 'module';
                script.src = 'js/main.js';
                document.head.appendChild(script);
            } else {
                setTimeout(checkTauri, 100);
            }
        };
        checkTauri();
    </script>
</body>
</html>